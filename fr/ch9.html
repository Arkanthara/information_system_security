<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ch9 – ISS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-96c1bb8b336142dcc39f931773fab1b9.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-9ee82e006983bafa07c9ac29a901142c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="site_libs/bootstrap/bootstrap-96c1bb8b336142dcc39f931773fab1b9.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ISS</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-langage" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-globe" role="img">
</i> 
 <span class="menu-text">Langage</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-langage">    
        <li>
    <a class="dropdown-item" href="./../index.html">
 <span class="dropdown-text">Anglais</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./index.html">
 <span class="dropdown-text">Français</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ch1.html">Cours</a></li><li class="breadcrumb-item"><a href="./ch9.html">Tiers de Confiance et Certification (Trusted Third Parties - TTP)</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Cours</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Notions de base en cryptographie</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cryptographie symétrique</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cryptographie Asymétrique (à Clés Publiques)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Fonctions de Hachage Cryptographiques et MACs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Signatures Digitales</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Authentification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Protocoles d’Établissement de Clés (KEP)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch9.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Tiers de Confiance et Certification (Trusted Third Parties - TTP)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercices</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./presentations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Présentations</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#tiers-de-confiance-et-certification-trusted-third-parties---ttp" id="toc-tiers-de-confiance-et-certification-trusted-third-parties---ttp" class="nav-link active" data-scroll-target="#tiers-de-confiance-et-certification-trusted-third-parties---ttp">Tiers de Confiance et Certification (Trusted Third Parties - TTP)</a>
  <ul class="collapse">
  <li><a href="#ttp" id="toc-ttp" class="nav-link" data-scroll-target="#ttp">TTP</a>
  <ul class="collapse">
  <li><a href="#modes-de-fonctionnement-des-ttp" id="toc-modes-de-fonctionnement-des-ttp" class="nav-link" data-scroll-target="#modes-de-fonctionnement-des-ttp">Modes de Fonctionnement des TTP</a></li>
  <li><a href="#key-distribution-centers-kdcs" id="toc-key-distribution-centers-kdcs" class="nav-link" data-scroll-target="#key-distribution-centers-kdcs">Key Distribution Centers (KDCs)</a></li>
  <li><a href="#ca" id="toc-ca" class="nav-link" data-scroll-target="#ca">CA</a></li>
  <li><a href="#entités-fonctionnelles-liées-à-la-certification" id="toc-entités-fonctionnelles-liées-à-la-certification" class="nav-link" data-scroll-target="#entités-fonctionnelles-liées-à-la-certification">Entités Fonctionnelles Liées à la Certification</a></li>
  <li><a href="#autres-ttps" id="toc-autres-ttps" class="nav-link" data-scroll-target="#autres-ttps">Autres TTPs</a></li>
  </ul></li>
  <li><a href="#public-key-authentication" id="toc-public-key-authentication" class="nav-link" data-scroll-target="#public-key-authentication">Public Key Authentication</a>
  <ul class="collapse">
  <li><a href="#certificats" id="toc-certificats" class="nav-link" data-scroll-target="#certificats">Certificats</a></li>
  <li><a href="#certificate-revocation-lists-crls" id="toc-certificate-revocation-lists-crls" class="nav-link" data-scroll-target="#certificate-revocation-lists-crls">Certificate Revocation Lists (CRLs)</a></li>
  <li><a href="#arbres-dauthentification" id="toc-arbres-dauthentification" class="nav-link" data-scroll-target="#arbres-dauthentification">Arbres d’Authentification</a></li>
  <li><a href="#topologies-de-certification" id="toc-topologies-de-certification" class="nav-link" data-scroll-target="#topologies-de-certification">Topologies de Certification</a></li>
  </ul></li>
  <li><a href="#public-key-infrastructure-pki" id="toc-public-key-infrastructure-pki" class="nav-link" data-scroll-target="#public-key-infrastructure-pki">Public Key Infrastructure (PKI)</a>
  <ul class="collapse">
  <li><a href="#entités-fonctionnelles-principales" id="toc-entités-fonctionnelles-principales" class="nav-link" data-scroll-target="#entités-fonctionnelles-principales">Entités Fonctionnelles Principales</a></li>
  <li><a href="#avantages-et-inconvénients" id="toc-avantages-et-inconvénients" class="nav-link" data-scroll-target="#avantages-et-inconvénients">Avantages et Inconvénients</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="ch9.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ch1.html">Cours</a></li><li class="breadcrumb-item"><a href="./ch9.html">Tiers de Confiance et Certification (Trusted Third Parties - TTP)</a></li></ol></nav></header>





<section id="tiers-de-confiance-et-certification-trusted-third-parties---ttp" class="level1">
<h1>Tiers de Confiance et Certification (Trusted Third Parties - TTP)</h1>
<section id="ttp" class="level2">
<h2 class="anchored" data-anchor-id="ttp">TTP</h2>
<section id="modes-de-fonctionnement-des-ttp" class="level3">
<h3 class="anchored" data-anchor-id="modes-de-fonctionnement-des-ttp">Modes de Fonctionnement des TTP</h3>
<p><strong>Trois modes opérationnels :</strong></p>
<ul>
<li><strong>In-line</strong> : TTP agit comme intermédiaire, relaye tous les échanges en temps réel (ex: Proxies, Secure Gateways)</li>
<li><strong>On-line</strong> : TTP participe en temps réel mais A et B communiquent directement (ex: KDC)</li>
<li><strong>Off-line</strong> : TTP ne participe pas en temps réel, rend l’information disponible à priori (ex: CA)</li>
</ul>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[A] --&gt;|in-line| TTP[TTP]
    TTP --&gt;|in-line| B[B]
    
    A2[A] ---|on-line| TTP2[TTP on-line]
    A2 &lt;--&gt;|direct| B2[B]
    
    A3[A] -.-&gt;|échange préalable| TTP3[TTP off-line]
    B3[B] -.-&gt;|échange préalable| TTP3
    A3 &lt;--&gt;|direct| B3
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p><strong>Comparaison :</strong></p>
<ul>
<li><strong>Off-line</strong> : Échanges facilités, pas besoin de disponibilité permanente</li>
<li><strong>In-line/On-line</strong> : Disponibilité permanente requise</li>
<li><strong>Off-line</strong> : Révocation des privilèges plus complexe</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>TTP: Modes de Fonctionnement</strong></p>
<ul>
<li><p><strong>In-line</strong> : Le TTP agit comme <strong>intermédiaire</strong> pour relayer en temps réel les échanges entre A et B. Exemples : Proxies, Secure Gateways.</p></li>
<li><p><strong>On-line</strong> : Le TTP <strong>participe en temps réel</strong> aux échanges entre A et B mais A et B communiquent directement (sans passer par le TTP). Exemple : Key Distribution Center.</p></li>
<li><p><strong>Off-line</strong> : Le TTP <strong>ne participe pas</strong> à l’échange en temps réel mais rend l’information disponible <strong>à priori</strong>. Exemple : Certification Authorities.</p></li>
</ul>
<p><strong>Comparaison In-line/On-Line/Off-line :</strong> Échanges facilités et pas besoin de disponibilité permanente des TTP dans le off-line (contrairement aux deux autres) mais <strong>révocation des privilèges</strong> (p.ex. : lorsqu’une clé secrète est compromise) plus complexe.</p>
<p>[Diagrammes montrant les trois modes]</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Modes TTP :</strong></p>
<ul>
<li><strong>In-line</strong> : intermédiaire relay</li>
<li><strong>On-line</strong> : participation temps réel</li>
<li><strong>Off-line</strong> : info à priori (ex: CA)</li>
<li>Off-line : pas de disponibilité requise mais révocation complexe</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
<section id="key-distribution-centers-kdcs" class="level3">
<h3 class="anchored" data-anchor-id="key-distribution-centers-kdcs">Key Distribution Centers (KDCs)</h3>
<p><strong>Objectif :</strong> Résoudre le problème de distribution <span class="math inline">\(n^2\)</span> clés.</p>
<p><strong>Principe :</strong></p>
<ul>
<li>Sans KDC : <span class="math inline">\(\frac{n(n-1)}{2} \approx n^2\)</span> clés pour <span class="math inline">\(n\)</span> entités</li>
<li>Avec KDC : Seulement <span class="math inline">\(n\)</span> clés (chaque entité partage une clé avec KDC)</li>
<li>Clés de session générées dynamiquement par KDC</li>
</ul>
<p><strong>Avantages :</strong></p>
<ul>
<li>Scalabilité : une nouvelle entité = une seule nouvelle clé</li>
<li>Établissement canaux sûrs via tickets (à la Kerberos)</li>
</ul>
<p><strong>Inconvénients :</strong></p>
<ul>
<li><strong>Single point of security failure</strong> : KDC compromis → tout le système vulnérable</li>
<li><strong>Single point of operational failure</strong> : KDC indisponible (DoS) → système paralysé</li>
<li><strong>Performance bottleneck</strong> : Opérations coûteuses (encryption, random generation)</li>
</ul>
<p><strong>Solutions :</strong> Mirroring, répartition de charge</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>TTP: Key Distribution Centers (KDCs)</strong></p>
<p><strong>But :</strong> Résoudre le <strong>n² key distribution problem</strong> :</p>
<ul>
<li><p>Dans un environnement symétrique de <span class="math inline">\(n\)</span> entités sans intermédiaire : <span class="math inline">\(n(n-1)/2 \sim n^2\)</span> clés différentes sont nécessaires pour toutes les paires d’entités partagent une clé différente.</p></li>
<li><p>De plus, un tel système n’est pas <strong>évolutif</strong> (scalable) car l’adjonction d’une entité se traduit par la génération de <span class="math inline">\(n\)</span> nouvelles clés.</p></li>
</ul>
<p>Si chaque entité partage une clé avec un KDC, seules <strong>n clés</strong> sont nécessaires pour le fonctionnement du système et une clé suffit pour chaque nouvelle entité. L’établissement de canaux sûrs étant assuré par la génération de clés de session et la présence des tickets à la Kerberos.</p>
<p><strong>Problèmes :</strong></p>
<ul>
<li><p><strong>Single point of security failure</strong> : par construction le KDC peut usurper l’identité de tous les nœuds du réseau. S’il est compromis tout le système devient vulnérable.</p></li>
<li><p><strong>Single point of operational failure</strong> : le mode de fonctionnement habituel d’un KDC est on-line (év. in-line). S’il devient indisponible (p.ex. suite à un denial of service attack), tout le système est paralysé.</p></li>
<li><p><strong>Performance bottleneck</strong> : les opérations des KDC sont souvent coûteuses en temps de calcul (cryptage/décryptage, random generation, etc.). Des solutions classiques (ie. le mirroring) doivent être envisagées pour répartir la charge des KDCs.</p></li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>KDC :</strong></p>
<ul>
<li>Résout problème <span class="math inline">\(n^2\)</span> → <span class="math inline">\(n\)</span> clés</li>
<li>Scalable : +1 entité = +1 clé</li>
<li>Risques : single point of failure (sécurité + opérationnel), bottleneck</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
<section id="ca" class="level3">
<h3 class="anchored" data-anchor-id="ca">CA</h3>
<p>Certification Authorities (CAs)</p>
<p><strong>Rôle :</strong> Authentifier l’association entre une <strong>entité</strong> et sa <strong>clé publique</strong>.</p>
<p><strong>Fonctionnement :</strong></p>
<ol type="1">
<li>CA vérifie identité (passeport, etc.)</li>
<li>CA crée et signe <strong>certificat</strong> contenant cette association</li>
<li>Certificats accessibles aux entités (peuvent être cachés)</li>
</ol>
<p><strong>Vérification :</strong> Nécessite copie authentique de la clé publique de la CA.</p>
<p><strong>Avantages :</strong></p>
<ul>
<li>Mode <strong>off-line</strong> : Indisponibilité courte acceptable</li>
<li>Simpler then safer : pas de protocoles complexes</li>
</ul>
<p><strong>Inconvénients :</strong></p>
<ul>
<li><strong>Révocation asynchrone</strong> : Certificat peut devenir invalide (vol clé privée)</li>
<li><strong>Solution</strong> : Certificate Revocation Lists (CRLs) signées</li>
</ul>
<p><strong>Compromission CA :</strong></p>
<p>Conséquences graves si clé privée de signature compromise.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>TTP: Certification Authorities (CAs)</strong></p>
<p>Le rôle premier d’une <strong>Entité de Certification</strong> (Certification Authority ou <strong>CA</strong>) est d’<strong>authentifier l’association entre une entité et sa clé publique</strong> (pensez aux attaques Man-In-the-Middle !).</p>
<p>La CA va <strong>créer et signer des certificats</strong> contenant cette association (moyennant une preuve d’identité comme un passeport) et les rendre accessibles aux entités concernées.</p>
<p>Une fois signées, des copies des certificats (<strong>cached certificates</strong>) peuvent être gardées dans des endroits non protégés (p.ex. dans l’espace disque de l’utilisateur). Cependant, afin de vérifier la signature des certificats, les entités concernées nécessitent une <strong>copie authentique de la clé publique de la CA</strong>.</p>
<p><strong>Simpler then safer</strong> : pas besoin d’implanter des protocoles complexes dans une CA.</p>
<p>Le mode de fonctionnement habituel d’une CA est <strong>off-line</strong>, ce qui diminue les conséquences des périodes (courtes…) d’indisponibilité.</p>
<p><strong>Problème associé au mode off-line :</strong> la validité des cached certificates peut être remise en question de manière “<strong>asynchrone</strong>” par un vol de clé privé.</p>
<p><strong>Remède :</strong> les CAs publient également des listes signées des certificats non valides (<strong>Certificate Revocation Lists</strong> ou <strong>CRLs</strong>).</p>
<p>Le compromis d’une CAs a des conséquences moins évidentes mais presque aussi néfastes que celui d’un KDC surtout si la clé privée servant à signer des certificats est aussi compromise.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>CA :</strong></p>
<ul>
<li>Authentifie association entité ↔︎ clé publique</li>
<li>Signe certificats (mode off-line)</li>
<li>CRLs pour révocations</li>
<li>Compromission = conséquences graves</li>
</ul>
</div>
</div>
</div>
<hr>
<section id="proof-of-possession-pop" class="level4">
<h4 class="anchored" data-anchor-id="proof-of-possession-pop">Proof of Possession (PoP)</h4>
<p><strong>Problème :</strong> Vérifier identité ne suffit pas, il faut aussi vérifier possession de la clé privée.</p>
<p><strong>Attaque sans PoP :</strong></p>
<ol type="1">
<li>A signe document et l’envoie à B (notaire) : <span class="math inline">\(S_{priv_A}(\text{Invention}), S_{priv_{CA_A}}(Cert_A)\)</span></li>
<li>C intercepte, demande à <span class="math inline">\(CA_C\)</span> (sans PoP) certificat associant C à <span class="math inline">\(pub_A\)</span></li>
<li>C envoie à B : <span class="math inline">\(S_{priv_A}(\text{Invention}), S_{priv_{CA_C}}(Cert_C)\)</span></li>
<li>C devient l’inventeur !</li>
</ol>
<p><strong>Protocole PoP simple :</strong></p>
<ol type="1">
<li><span class="math inline">\(CA \rightarrow A: A, r\)</span> (nombre aléatoire + identité)</li>
<li><span class="math inline">\(CA \leftarrow A: S_{priv_A}(A, r)\)</span></li>
<li><span class="math inline">\(CA\)</span> vérifie signature avec <span class="math inline">\(pub_A\)</span></li>
</ol>
<p><strong>Conséquences :</strong></p>
<ul>
<li>Introduit <strong>niveaux de confiance</strong> pour CAs</li>
<li>Critères : PoP, mise à jour CRLs, sécurité clé signature</li>
<li>Problème aggravé par prolifération non contrôlée des CAs</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>CA: Proof of Possession (PoP)</strong></p>
<p>La vérification de l’identité de A pour créer (év. modifier) un certificat associant A à sa clé publique n’est pas un critère suffisant. Il faut également <strong>vérifier que A possède vraiment la clé privée correspondante</strong>.</p>
<p>Soient A et sa CA : <span class="math inline">\(CA_A\)</span>. Voyons ce qu’un attaquant actif C peut faire en “collaboration” avec une <span class="math inline">\(CA_C\)</span> qui ne vérifierait pas la PoP :</p>
<p>A signe un document contenant la description d’une invention révolutionnaire et l’envoie à B (le notaire) avec son certificat signé par <span class="math inline">\(CA_A\)</span> :</p>
<p><span class="math inline">\(A \rightarrow B: S_{priv_A}(\text{Invention}), S_{priv_{CA_A}}(Cert_A)\)</span></p>
<p>C intercepte ce paquet, s’adresse à <span class="math inline">\(CA_C\)</span> et lui demande de créer un certificat associant son identité C à la clé publique de A et envoie à B :</p>
<p><span class="math inline">\(C \rightarrow B: S_{priv_A}(\text{Invention}), S_{priv_{CA_C}}(Cert_C)\)</span></p>
<p>C devient ainsi l’inventeur révolutionnaire…</p>
<p><strong>Protocole simple de vérification de PoP :</strong></p>
<p><span class="math inline">\(CA \rightarrow A: A, r\)</span> ; <span class="math inline">\(r\)</span> : nb. aléatoire, A pour protéger A des chosen message attacks.</p>
<p><span class="math inline">\(CA \leftarrow A: S_{priv_A}(A, r)\)</span> ; CA n’a plus qu’à vérifier la signature avec <span class="math inline">\(pub_A\)</span>.</p>
<p>Ce critère et d’autres critères de comportement comme la mise à jour des CRLs ou la sécurité de la clé de signature introduisent des <strong>niveaux de confiance</strong> pour les CAs et pour les certificats qu’elles signent.</p>
<p>Ce phénomène s’aggrave avec la <strong>prolifération non contrôlée des CAs</strong> !</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>PoP (Proof of Possession) :</strong></p>
<ul>
<li>Vérifier possession clé privée (pas juste identité)</li>
<li>Sans PoP : attaquant peut usurper identité</li>
<li>Protocole : CA vérifie signature sur challenge</li>
<li>Introduit niveaux de confiance pour CAs</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
<section id="séparation-certificationrévocation" class="level4">
<h4 class="anchored" data-anchor-id="séparation-certificationrévocation">Séparation Certification/Révocation</h4>
<p><strong>Problème :</strong> Si même clé signe certificats et CRLs, adversaire possédant clé privée CA peut :</p>
<ol type="1">
<li>Publier CRL révoquant certificat de victime A</li>
<li>Créer faux certificat associant A à une clé contrôlée par adversaire</li>
<li>Décrypter transactions confidentielles pour A</li>
<li>Se faire passer par A (signatures, authentification)</li>
</ol>
<p><strong>Solution : Separation of Duties</strong></p>
<p>Séparation claire des tâches :</p>
<ul>
<li><strong>Certificats</strong> et <strong>CRLs</strong> signés avec <strong>clés différentes</strong></li>
<li>Par <strong>entités fonctionnelles différentes</strong> :
<ul>
<li><strong>Certification Authority</strong> (CA)</li>
<li><strong>Revocation Authority</strong> (RA)</li>
</ul></li>
<li>Résidant dans <strong>machines différentes</strong></li>
<li>Soumises à <strong>security policies indépendantes</strong></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>CA: Certification et Révocation</strong></p>
<p><strong>Problème :</strong> Si la même clé sert à signer les certificats et les CRLs, un adversaire possédant la clé privée de signature d’une CA peut attaquer une “victime” A sous l’autorité de cette CA comme suit :</p>
<ul>
<li>Publier une CRL contenant le certificat révoqué de A.</li>
<li>Créer un certificat associant A à une clé publique dont il contrôle la clé privée pour ensuite :
<ul>
<li>jouer le Man-In-the-Middle pour décrypter les transactions confidentielles pour A ;</li>
<li>se faire passer par A pour des transactions authentifiées ou des documents signés.</li>
</ul></li>
</ul>
<p><strong>Solution : Separation of duties :</strong> La certification et la révocation deviennent des tâches clairement différenciées :</p>
<ul>
<li>Certificats et CRLs sont signés avec des <strong>clés différentes</strong>,</li>
<li>par des <strong>entités fonctionnelles différentes</strong> (Certification Authority et Revocation Authority) ;</li>
<li>si possible, résidant dans des <strong>machines différentes</strong> soumises à des critères de sécurité (security policies) <strong>indépendants</strong>.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Separation of Duties :</strong></p>
<ul>
<li>Certificats ≠ CRLs (clés différentes)</li>
<li>CA ≠ Revocation Authority</li>
<li>Machines et policies séparées</li>
<li>Évite attaques post-compromission</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
</section>
<section id="entités-fonctionnelles-liées-à-la-certification" class="level3">
<h3 class="anchored" data-anchor-id="entités-fonctionnelles-liées-à-la-certification">Entités Fonctionnelles Liées à la Certification</h3>
<p><strong>Name Server :</strong></p>
<ul>
<li>Gestion espace de noms unique et cohérent</li>
<li>Combiné avec certification si authentification nécessaire</li>
<li>Exemple : <strong>DNSSec</strong> (DNS authentifié pour Internet)</li>
</ul>
<p><strong>Registration Authority (RA) :</strong></p>
<ul>
<li>Tâches nécessitant contact direct avec entités</li>
<li>Vérification identité, PoP, demandes/modifications certificats</li>
<li>Détachée de CA pour raisons géographiques</li>
</ul>
<p><strong>Key Generator :</strong></p>
<ul>
<li>Génération de paires clés publique/privée</li>
<li><strong>Avantages</strong> : Simplicité utilisateurs, sécurité renforcée</li>
<li><strong>Désavantage</strong> : Clé privée connue d’une autre entité → perte non-répudiation</li>
</ul>
<p><strong>Certificate Directory :</strong></p>
<ul>
<li>Répertoire accès lecture seule aux certificats</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Entités Fonctionnelles Liées à la Certification</strong></p>
<ul>
<li><p><strong>Name Server</strong> : responsable de la gestion d’un <strong>espace de noms unique et cohérent</strong>. Lorsque l’authentification est nécessaire, la gestion des noms doit être complétée par la certification des clés publiques associées à ces noms.</p>
<p>Exemple d’une solution pilote combinant les deux concepts : <strong>DNSsec</strong> : environnement de gestion de noms authentifiés pour Internet.</p></li>
<li><p><strong>Registration Authority</strong> : Entité chargée d’accomplir les tâches relatives à la gestion des certificats nécessitant un <strong>contact direct</strong> avec les entités concernées. Ces tâches comprennent la vérification des paramètres nécessaires à la demande initiale ou à la modification des certificats (vérification d’identité, PoP, etc.). Le fait de détacher cette fonctionnalité de la CA est normalement dû à des considérations géographiques.</p></li>
<li><p><strong>Key Generator</strong> : Permet de déléguer le processus de création de paires de clés publique/privée à une entité dédiée :</p>
<ul>
<li><strong>Avantages</strong> : simplicité pour les utilisateurs ; possibilité de renforcer la sécurité des paires choisies.</li>
<li><strong>Désavantage</strong> : Clé privée connue d’une autre entité ! Perte de la non-répudiation.</li>
</ul></li>
<li><p><strong>Certificate Directory</strong> : Le répertoire permettant aux utilisateurs d’accéder (en lecture seulement) aux certificats des correspondants.</p></li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Entités certification :</strong></p>
<ul>
<li><strong>Name Server</strong> : noms + DNSSec</li>
<li><strong>RA</strong> : contact direct, vérifications</li>
<li><strong>Key Generator</strong> : génération clés (⚠️ perd non-répudiation)</li>
<li><strong>Certificate Directory</strong> : accès lecture certificats</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
<section id="autres-ttps" class="level3">
<h3 class="anchored" data-anchor-id="autres-ttps">Autres TTPs</h3>
<p><strong>Timestamp Agent (TA) :</strong></p>
<ul>
<li>Certifie existence document/transaction à un moment précis</li>
<li>Méthodes :
<ul>
<li>Associer timestamp au document (ou <span class="math inline">\(h(\text{doc})\)</span>) + signer</li>
<li>Utiliser authentication tree (arbre d’authentification)</li>
</ul></li>
</ul>
<p><strong>Notary Agent :</strong></p>
<ul>
<li>Comme TA mais aussi : validité, origine, appartenance</li>
<li>Support légal pour non-répudiation</li>
</ul>
<p><strong>Key Escrow Agent (KEA) :</strong></p>
<ul>
<li>Accès clés secrètes de session sous conditions (mandat judiciaire)</li>
<li>Nécessite système cryptage dédié</li>
</ul>
<p><strong>Exemple : Clipper/Capstone</strong></p>
<ul>
<li><strong>Clipper chip</strong> (1993) : Encryption symétrique avec accès KEA</li>
<li>Polémique, failles découvertes</li>
<li><strong>Capstone chip</strong> : Successeur (carte PCMCIA Fortezza)</li>
<li>Military level security</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Autres TTPs</strong></p>
<ul>
<li><p><strong>Timestamp agent (TA)</strong> : Certifie l’existence d’un document ou le déroulement d’une transaction à un moment bien spécifié dans le temps. Pour ce faire le TA peut :</p>
<ul>
<li>associer un timestamp au document (ou à <span class="math inline">\(h(\text{doc})\)</span> avec <span class="math inline">\(h\)</span> une Collision Resistant Hash Fonction) et signer le tout avec sa clé privée et</li>
<li>utiliser un authentication tree (arbre d’authentification, cf.&nbsp;page 231).</li>
</ul></li>
<li><p><strong>Notary agent</strong> : Certifie non seulement l’existence d’un document à un temps donné (comme le TA) mais également sa <strong>validité, origine ou appartenance</strong> à une entité donnée. Ce service constitue un support (légalement nécessaire ?) pour la non-répudiation.</p></li>
<li><p><strong>Key escrow agent (KEA)</strong> : Entité autorisée à accéder aux clés secrètes de session pourvu que certaines conditions (p.ex. un mandat judiciaire) soient remplies. Ceci nécessite un système de cryptage dédié. Exemple, le Clipper key escrow system :</p>
<ul>
<li>Annoncé en Avril 1993 par l’administration USA, au milieu d’une grande polémique, comme la solution de cryptage de communications à grande échelle.</li>
<li>Le <strong>Clipper chip</strong> est un dispositif de cryptage/décryptage symétrique donnant accès aux clés des session lorsque les clés secrètes de deux KEAs (normalement des agences fédérales) lui sont fournies en entrée.</li>
<li>La présence de quelques failles ainsi que le besoin de crypto asymétrique ont donné lieu à son successeur : le <strong>Capstone chip</strong> pouvant être intégré dans une carte PCMCIA (appelée <strong>Fortezza</strong> et utilisée pour military level security).</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Autres TTPs :</strong></p>
<ul>
<li><strong>TA</strong> : timestamp existence document</li>
<li><strong>Notary</strong> : TA + validité/origine (non-répudiation)</li>
<li><strong>KEA</strong> : accès clés sous conditions légales</li>
<li>Exemple : Clipper/Fortezza (controversé)</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
</section>
<section id="public-key-authentication" class="level2">
<h2 class="anchored" data-anchor-id="public-key-authentication">Public Key Authentication</h2>
<section id="certificats" class="level3">
<h3 class="anchored" data-anchor-id="certificats">Certificats</h3>
<p><strong>Définition :</strong> Information associant une entité à sa clé publique.</p>
<p><strong>Structure générique :</strong></p>
<ul>
<li><strong>Serial Number, Version</strong></li>
<li><strong>Issuer</strong> : Identité CA signataire (globale et unique)</li>
<li><strong>Signature Algorithm</strong> : Algorithme calcul signature (ex: MD5+ElGamal, SHA+RSA)</li>
<li><strong>Subject</strong> : Nom entité certifiée (global et unique)</li>
<li><strong>Subject Public Key</strong> : Clé publique
<ul>
<li>RSA : <span class="math inline">\((n, e)\)</span></li>
<li>DH : <span class="math inline">\((p, \alpha, \alpha^x \mod p)\)</span></li>
</ul></li>
<li><strong>Subject Public Key Algorithm</strong> : RSA, DH, etc.</li>
<li><strong>Validity</strong> : Période validité (UTC)</li>
<li><strong>Signature</strong> : Porte sur tous enregistrements précédents, garantit authenticité</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Authenticité des clés publiques: Certificats</strong></p>
<p>Un <strong>certificat</strong> est une pièce d’information associant une entité à sa clé publique. De manière générique, il est constitué des élément suivants :</p>
<ul>
<li><strong>Serial Number, Version</strong>.</li>
<li><strong>Issuer</strong> : l’identité (global et unique) de la CA signataire.</li>
<li><strong>Signature Algorithm</strong> : l’algorithme permettant de calculer la signature sur le certificat. P.ex. : MD5 + ElGamal ou SHA + RSA.</li>
<li><strong>Subject</strong> : Le nom (global et unique) de l’entité dont la clé publique est certifiée.</li>
<li><strong>Subject Public Key</strong> : La clé publique de l’entité. Par exemple :
<ul>
<li><span class="math inline">\((n,e)\)</span> : modulus et exposant publique pour RSA.</li>
<li><span class="math inline">\((p, \alpha^x \mod p)\)</span> : modulus, générateur et partie publique pour Diffie-Hellman.</li>
</ul></li>
<li><strong>Subject Public Key Algorithm</strong> : L’algorithme associé à la clé publique. P.ex : RSA ou Diffie-Hellman.</li>
<li><strong>Validity</strong> : La période de validité du certificat, normalement exprimée en UTC.</li>
<li><strong>Signature</strong> : Contient la signature effectuée au moyen du Signature Algorithm et de la clé privée de la CA. Elle porte sur l’ensemble des enregistrements précédents et garantit ainsi l’authenticité des informations qu’ils contiennent.</li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Certificat :</strong></p>
<ul>
<li>Issuer (CA) + Subject (entité)</li>
<li>Clé publique + algorithme</li>
<li>Validity period</li>
<li>Signature CA sur tout</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
<section id="certificate-revocation-lists-crls" class="level3">
<h3 class="anchored" data-anchor-id="certificate-revocation-lists-crls">Certificate Revocation Lists (CRLs)</h3>
<p><strong>Définition :</strong> Listes de certificats devenus invalides.</p>
<p><strong>Raisons révocation :</strong></p>
<ul>
<li>Clé privée compromise</li>
<li>Modification algorithme</li>
<li>Changement fonction (role-based certificate)</li>
<li>Autres facteurs invalidant informations certificat</li>
</ul>
<p><strong>Structure CRL :</strong></p>
<ul>
<li><strong>Issuer, Signature Algorithm</strong></li>
<li><strong>Date of Issue, Date of Next Issue</strong></li>
<li>Pour chaque certificat révoqué :
<ul>
<li><strong>Serial Number</strong></li>
<li><strong>Revocation Date</strong></li>
</ul></li>
<li><strong>Signature</strong> : Sur toute la liste</li>
</ul>
<p><strong>Exigences :</strong></p>
<ul>
<li>CAs doivent publier CRLs <strong>fréquemment</strong></li>
<li>Canaux distribution <strong>large audience</strong></li>
<li>Minimiser risque fraudes</li>
</ul>
<p><strong>Problème :</strong> Révocation = talon d’Achille systèmes à clés publiques</p>
<p><strong>Solutions alternatives :</strong></p>
<ul>
<li>Certificats validité très courte (quelques minutes)</li>
<li>Re-confirmation périodique par CAs</li>
<li>⚠️ Retour au mode on-line → haute disponibilité requise</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Certificate Revocation Lists (CRLs)</strong></p>
<p>Il s’agit de listes contenant des certificats devenus <strong>non valables</strong> suite à une clé privée compromise ou à tout autre facteur mettant en évidence la validité des informations contenues dans un certificat (changement de l’algorithme utilisé, changement de fonction pour un role-based certificate, etc.).</p>
<p>Une CRL générique a les éléments suivants :</p>
<ul>
<li><strong>Issuer, Signature Algorithm</strong> : comme pour les certificats.</li>
<li><strong>Date of Issue, Date of Next Issue</strong> : date d’émission et date de la prochaine émission.</li>
<li>Pour chaque certificat révoqué, les enregistrements suivants :
<ul>
<li><strong>Serial Number</strong> du certificat révoqué.</li>
<li><strong>Revocation Date</strong>.</li>
</ul></li>
<li><strong>Signature</strong> : signature portant sur toute la liste.</li>
</ul>
<p>Une CA se doit de publier des CRLs avec une <strong>fréquence très élevée</strong> et en utilisant des canaux de distribution de <strong>large audience</strong>, afin de diminuer le risque de fraudes.</p>
<p><strong>La révocation est le talon d’Achille de tout système à clés publiques…</strong></p>
<p>Une solution : certificats avec des lapses de validité très courts (quelques minutes) exigeant une re-confirmation périodique de la part des CAs…</p>
<p>…mais ceci nous fait revenir au mode on-line et à imposer, donc, une grande disponibilité de la part des CAs.</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>CRLs :</strong></p>
<ul>
<li>Listes certificats invalides (compromis, etc.)</li>
<li>Structure : issuer, dates, serial numbers, signature</li>
<li>Publication fréquente requise</li>
<li>Talon d’Achille PKI</li>
<li>Alternative : certificats courte durée (→ on-line)</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
<section id="arbres-dauthentification" class="level3">
<h3 class="anchored" data-anchor-id="arbres-dauthentification">Arbres d’Authentification</h3>
<p><strong>Principe :</strong> Alternative à certification pour authentifier informations publiques.</p>
<p><strong>Construction :</strong> Arbre (binaire) avec hash fonction + authentification racine.</p>
<p>Pour <span class="math inline">\(n\)</span> valeurs <span class="math inline">\(Y_1, Y_2, ..., Y_n\)</span> :</p>
<ol type="1">
<li>Valeurs placées dans feuilles</li>
<li>Arcs depuis feuilles étiquetés <span class="math inline">\(h(Y_i)\)</span></li>
<li>Nœuds non-terminaux étiquetés <span class="math inline">\(h(h_1 || h_2)\)</span> (|| = concaténation)</li>
<li>Racine <span class="math inline">\(R\)</span> authentifiée (signature digitale)</li>
</ol>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TD
    R["R = h(h2 || h(Y4))"]
    h2["h2 = h(h1 || h(Y3))"]
    h1["h1 = h(h(Y1) || h(Y2))"]
    Y1[Y1] --&gt; hY1["h(Y1)"]
    Y2[Y2] --&gt; hY2["h(Y2)"]
    Y3[Y3] --&gt; hY3["h(Y3)"]
    Y4[Y4] --&gt; hY4["h(Y4)"]
    hY1 --&gt; h1
    hY2 --&gt; h1
    h1 --&gt; h2
    hY3 --&gt; h2
    h2 --&gt; R
    hY4 --&gt; R
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p><strong>Vérification <span class="math inline">\(Y_1\)</span> :</strong> Fournir <span class="math inline">\(h(Y_2), h(Y_3), h(Y_4)\)</span>, calculer <span class="math inline">\(h(Y_1), h_1, h_2\)</span> et vérifier <span class="math inline">\(h(h_2 || h(Y_4)) = R\)</span></p>
<p><strong>Avantages :</strong></p>
<ul>
<li>Seul <span class="math inline">\(R\)</span> nécessite protection cryptographique</li>
<li>Arbres équilibrés : données intermédiaires <span class="math inline">\(\sim \log_2 n\)</span></li>
</ul>
<p><strong>Inconvénients :</strong></p>
<ul>
<li>Nœud modifié → recalcul chemin jusqu’à racine</li>
<li>Ajout nœuds → arbres non-équilibrés recommandés</li>
</ul>
<p><strong>Application principale : Timestamping</strong></p>
<p>TA</p>
<ul>
<li>construit arbre</li>
<li>fournit timestamp signé + chemin vérification</li>
<li>publie <span class="math inline">\(R\)</span> quotidiennement (journal).</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Arbres d’Authentification</strong></p>
<p>Les arbres d’authentification sont une <strong>alternative à la certification</strong> pour authentifier des information publiques.</p>
<p>Il s’agit d’exploiter les avantages d’une structure d’arbre (normalement binaire) avec l’utilisation de hash fonctions et l’authentification du nœud racine.</p>
<p>Soit un arbre A avec <span class="math inline">\(n\)</span> feuilles. Soit <span class="math inline">\(h\)</span> une collision resistant hash function (CRHF). L’arbre A peut être utilisé pour l’authentification de <span class="math inline">\(n\)</span> valeurs publiques <span class="math inline">\(Y_1, Y_2, ..., Y_n\)</span> en construisant un arbre d’authentification comme suit :</p>
<ol type="1">
<li>Les valeurs <span class="math inline">\(Y_1, Y_2, ..., Y_n\)</span> sont placées dans les feuilles de l’arbre.</li>
<li>Chaque arc partant d’une feuille <span class="math inline">\(Y_i\)</span> est étiqueté <span class="math inline">\(h(Y_i)\)</span> (<span class="math inline">\(h\)</span> étant une CRHF).</li>
<li>Chaque nœud non-terminal ayant des arcs sous-jacents étiquetés <span class="math inline">\(h_1\)</span> et <span class="math inline">\(h_2\)</span> est étiqueté <span class="math inline">\(h(h_1 || h_2)\)</span> (|| dénote concaténation).</li>
</ol>
<p>[Diagramme arbre]</p>
<p>Pour vérifier l’authenticité de <span class="math inline">\(Y_1\)</span>, il est nécessaire de fournir les valeurs <span class="math inline">\(h(Y_2), h(Y_3), h(Y_4)\)</span>. Après, il suffit de calculer <span class="math inline">\(h(Y_1), h_1\)</span> et <span class="math inline">\(h_2\)</span> (selon la figure) et accepter l’authenticité de <span class="math inline">\(Y_1\)</span> si <span class="math inline">\(h(h_2 || h(Y_4)) = R\)</span>. Une modification illicite dans <span class="math inline">\(Y_1\)</span> se traduirait (par les caractéristiques de la CRHF) en une valeur différente pour <span class="math inline">\(h(h_2 || h(Y_4)) \neq R\)</span>.</p>
<p>À noter que seule la valeur <span class="math inline">\(R\)</span> doit être authentifiée (p.ex. à l’aide d’une signature digitale). Les autres valeurs sont protégées par la non-réversibilité de la CRHF.</p>
<p><strong>Avantage :</strong> Seul <span class="math inline">\(R\)</span> nécessite une protection cryptographique pour l’authentification !</p>
<p><strong>Inconvénients :</strong></p>
<ul>
<li>Pour vérifier la valeur <span class="math inline">\(Y_1\)</span>, les valeurs <span class="math inline">\(h(Y_{2,3,4})\)</span> et la valeur <span class="math inline">\(R\)</span> sont nécessaires. Pour minimiser cet effet, on peut d’utiliser des arbres équilibrés (des arbres dont les chemins différent d’au plus un arc) afin de réduire le nombre de données intermédiaires à <span class="math inline">\(\sim \log_2 n\)</span>.</li>
<li>Lorsqu’un nœud est modifié, tout le chemin jusqu’à la racine doit être re-calculé.</li>
<li>Lorsque des nouveaux nœuds sont rajoutés, il convient de construire des arbres non-équilibrés (comme celui de la figure) et de rajouter les nœuds par la racine.</li>
</ul>
<p><strong>Application principale : timestamping :</strong> le timestamping agent (TA) construit un tel arbre et fournit au requérant le timestamp signé avec sa clé privée ainsi que le chemin de vérification. TA publie <span class="math inline">\(R\)</span> quotidiennement dans un journal ce qui lui empêche de tricher !</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Arbres d’authentification :</strong></p>
<ul>
<li>Alternative certification via hash + arbre</li>
<li>Seule racine <span class="math inline">\(R\)</span> signée</li>
<li>Vérification : chemin <span class="math inline">\(\sim \log_2 n\)</span> valeurs</li>
<li>Application : timestamping</li>
<li>TA publie <span class="math inline">\(R\)</span> quotidiennement</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
<section id="topologies-de-certification" class="level3">
<h3 class="anchored" data-anchor-id="topologies-de-certification">Topologies de Certification</h3>
<p><strong>Problème :</strong> Communication entre utilisateurs de CAs différentes → question de confiance.</p>
<p><strong>Cross-Certification :</strong></p>
<ul>
<li><span class="math inline">\(CA_A\)</span> certifie clé publique <span class="math inline">\(pub_{CA_B}\)</span> de <span class="math inline">\(CA_B\)</span></li>
<li>Certificat croisé : <span class="math inline">\(CA_A\{CA_B\}\)</span></li>
<li>Chaîne de certification : <span class="math inline">\(CA_A\{CA_B\} \rightarrow CA_B\{B\}\)</span></li>
<li>A vérifie clé B avec copie authentique <span class="math inline">\(pub_{CA_A}\)</span></li>
</ul>
<p><strong>Modèle Hiérarchique Strict (PEM/X.509) :</strong></p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TD
    Root[CA Racine]
    Root --&gt; CA1[CA Niveau 1]
    Root --&gt; CA2[CA Niveau 1]
    CA1 --&gt; CA3[CA Niveau 2]
    CA1 --&gt; CA4[CA Niveau 2]
    CA2 --&gt; CA5[CA Niveau 2]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>Toute chaîne non-locale commence au nœud racine</li>
<li>Clé publique racine supposée connue mondialement</li>
<li><strong>Problème :</strong> Centralisation, point de défaillance unique</li>
</ul>
<p><strong>Modèle Graphe (PGP) :</strong></p>
<ul>
<li>Utilisateurs agissent comme CAs pour correspondants</li>
<li>Structure graphe décentralisée</li>
<li>Adapté groupes fermés</li>
<li><strong>Limites :</strong> Populations non connectées</li>
</ul>
<p><strong>Modèles Hybrides :</strong></p>
<ul>
<li>Hiérarchie + certification croisée bidirectionnelle</li>
</ul>
<p><strong>Règle d’or :</strong> Chaînes courtes (maillon le plus faible !)</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Topologies de Certification</strong></p>
<p>Lorsque deux utilisateurs appartenant à des CAs différentes souhaitent communiquer, il apparaît un problème de confiance : doit-on faire confiance à un certificat émis par une autre CA ?.</p>
<p>Le processus de <strong>certification croisée</strong> (cross-certification) permet à <span class="math inline">\(CA_A\)</span> de certifier la clé publique <span class="math inline">\(pub_{CA_B}\)</span> de <span class="math inline">\(CA_B\)</span>. Le certificat résultant s’appelle certificat croisé (cross-certificate), on le note : <span class="math inline">\(CA_A\{CA_B\}\)</span>.</p>
<p>Si A désire vérifier l’authenticité de la clé publique de B et il existe un certificat croisé <span class="math inline">\(CA_A\{CA_B\}\)</span>, A va demander à B de lui fournir son certificat signé par <span class="math inline">\(CA_B\)</span>, soit <span class="math inline">\(CA_B\{B\}\)</span>. La <strong>chaîne de certification</strong> résultante : <span class="math inline">\(CA_A\{CA_B\} \rightarrow CA_B\{B\}\)</span> permet à A de vérifier la clé publique de B en utilisant une copie authentique de <span class="math inline">\(pub_{CA_A}\)</span>.</p>
<p>La relation de confiance nécessaire à la certification croisée n’est pas toujours facile à établir dans des environnements concurrents, c’est pourquoi des <strong>modèles hiérarchiques</strong> entre les CAs ont été proposés. Exemple le modèle hiérarchique strict de PEM/X.509 :</p>
<p>[Diagramme hiérarchie]</p>
<p>Dans l’environnement PEM, toute chaîne de certification non-locale commence au <strong>nœud racine</strong>, dont la clé publique est supposée connue du monde entier…</p>
<p>D’autres modèles comme celui proposé par <strong>PGP</strong> se basent sur une structure de graphe où les nœuds sont les utilisateurs qui agissent comme CAs pour certifier les clés publiques des correspondants. Même si bien adapté pour des groupes fermés d’utilisateurs, ce modèle a ses limites lorsqu’il est appliqué à des populations non connectées.</p>
<p>D’autres schémas proposés combinent la structure hiérarchique avec la certification croisée bidirectionnelle.</p>
<p>Il faut garder les chaînes de certification <strong>aussi courtes que possible</strong> (une chaîne est toujours aussi vulnérable que son <strong>maillon le plus faible</strong> !).</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-22-contents" aria-controls="callout-22" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-22" class="callout-22-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Topologies certification :</strong></p>
<ul>
<li><strong>Cross-certification</strong> : <span class="math inline">\(CA_A\{CA_B\} \rightarrow CA_B\{B\}\)</span></li>
<li><strong>Hiérarchique</strong> (PEM/X.509) : racine universelle</li>
<li><strong>Graphe</strong> (PGP) : utilisateurs = CAs</li>
<li><strong>Hybride</strong> : hiérarchie + cross-cert</li>
<li>Règle : chaînes courtes !</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
</section>
<section id="public-key-infrastructure-pki" class="level2">
<h2 class="anchored" data-anchor-id="public-key-infrastructure-pki">Public Key Infrastructure (PKI)</h2>
<p><strong>Définition :</strong> Infrastructure intégrée fournissant services de sécurité basés sur cryptographie à clés publiques.</p>
<section id="entités-fonctionnelles-principales" class="level3">
<h3 class="anchored" data-anchor-id="entités-fonctionnelles-principales">Entités Fonctionnelles Principales</h3>
<p><strong>Certification Authority (CA) :</strong></p>
<ul>
<li>Création et maintenance certificats</li>
</ul>
<p><strong>Certificate Repository :</strong></p>
<ul>
<li>Répertoire certificats accessible (X.500, LDAP, WWW, DNS)</li>
</ul>
<p><strong>Certificate Revocation :</strong></p>
<ul>
<li>Gestion certificats compromis/obsolètes (CRLs)</li>
</ul>
<p><strong>Key Backup and Recovery :</strong></p>
<ul>
<li>Sauvegarde/rétablissement clés perdues</li>
<li>Destruction support, oubli password, départ employé</li>
<li>⚠️ Clé privée décryption (pas signature)</li>
</ul>
<p><strong>Automatic Key Update :</strong></p>
<ul>
<li>Mise à jour clés après fin validité</li>
</ul>
<p><strong>Key and Certificate History :</strong></p>
<ul>
<li>Récupération clés obsolètes pour décrypter anciens documents</li>
</ul>
<p><strong>Cross-Certification :</strong></p>
<ul>
<li>Validation certificats d’autres PKIs (clients, fournisseurs, partenaires)</li>
</ul>
<p><strong>Support Non-Répudiation :</strong></p>
<p>Démontre le bon déroulement d’une transaction authentifiée</p>
<ul>
<li>Data origin authentication</li>
<li>Time-stamped data signature</li>
<li>Signed receipt of delivery</li>
</ul>
<p><strong>Secure Time Stamping :</strong></p>
<ul>
<li>Temps référence accepté par tous</li>
</ul>
<p><strong>Logiciel Client :</strong></p>
<ul>
<li>Opérations PKI côté client</li>
<li>Gestion certificats, signatures, décryption</li>
<li>Périphériques (cartes à puces, biométrie)</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Public Key Infrastructure (PKI): Définitions</strong></p>
<p><strong>Définition :</strong> Une PKI est une infrastructure intégrée permettant de fournir un ensemble de services de sécurité sur la base de la cryptographie à clés publiques.</p>
<p><strong>Entités Fonctionnelles :</strong></p>
<ul>
<li><p><strong>Entité de certification (Certification Authority ou CA)</strong> : Entité responsable de la création et maintenance des certificats.</p></li>
<li><p><strong>Répertoire des certificats (Certificate Repository)</strong> mettant les certificats à disposition des utilisateurs et des applications. Technologies utilisées : X.500, LDAP, Serveurs WWW, DNS, etc.</p></li>
<li><p><strong>Révocation des certificats (Certificate Revocation)</strong> compromis ou devenus obsolètes (notamment gestion des CRLs)</p></li>
<li><p><strong>Sauvegarde et rétablissement centralisés des clés (Key Backup and Recovery)</strong> : Entité permettant de gérer la perte de clés suite à des événements divers : destruction du support matériel, oubli du mot de passe de déblocage, départ de l’employé, etc. À noter que cette procédure s’applique principalement à la clé privée de décryption (par opposition à la clé privée de signature).</p></li>
<li><p><strong>Mise à jour automatique des clés (Automatic Key Update)</strong> après la fin de leur validité.</p></li>
<li><p><strong>Historique des clés et des certificats (Key and Certificate History)</strong>. Cette entité permet de récupérer des clés devenues obsolètes, ayant servi à encrypter un document dans le passé.</p></li>
<li><p><strong>Certification croisée (Cross-Certification)</strong> avec d’autres PKI (clients, fournisseurs, partenaires, etc.). Cette fonctionnalité permet (sous certaines contraintes) de valider les certificats émis par d’autres PKIs</p></li>
<li><p><strong>Support pour la non-répudiation</strong> : Service à valeur ajouté permettant de fournir l’évidence nécessaire à démontrer le déroulement d’une transaction authentifiée (data origin authentication, time-stamped data signature, signed receipt of delivery, etc.)</p></li>
<li><p><strong>Secure Time Stamping</strong> : Entité capable de fournir un temps de référence accepté par tous les intervenants d’une PKI. Applications principales : non-répudiation, arbitrage en cas de conflits, etc.</p></li>
<li><p><strong>Logiciel Client</strong> : Cette entité fonctionnelle permet de réaliser toutes les opérations propres à la PKI côté client. Exemples : gestion des certificats utilisateurs, signature de documents, décryption d’information, gestion de périphériques spécifiques (lecteurs de cartes à puces, dispositifs biométriques, etc.)</p></li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-24-contents" aria-controls="callout-24" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-24" class="callout-24-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>PKI - Entités principales :</strong></p>
<ul>
<li>CA : création/maintenance certificats</li>
<li>Repository : stockage certificats</li>
<li>Revocation : CRLs</li>
<li>Backup/Recovery : clés perdues (décryption)</li>
<li>Cross-cert : validation autres PKIs</li>
<li>Time stamping : référence temps</li>
<li>Client : opérations utilisateur</li>
</ul>
</div>
</div>
</div>
<hr>
</section>
<section id="avantages-et-inconvénients" class="level3">
<h3 class="anchored" data-anchor-id="avantages-et-inconvénients">Avantages et Inconvénients</h3>
<p><strong>Avantages :</strong></p>
<p><strong>Sécurité :</strong></p>
<ul>
<li>Environnement intégré sans maillons faibles</li>
</ul>
<p><strong>Tout en un :</strong></p>
<ul>
<li>Intégration multiples services : authentification forte, signatures, single sign-on, VPNs, B2C/B2B</li>
<li>Économie vs solutions “au cas par cas”</li>
</ul>
<p><strong>Interopérabilité :</strong></p>
<ul>
<li>Standards répandus (X.509, PKCS, OCSP)</li>
<li>Applications et dispositifs compatibles</li>
<li>Interopérabilité inter-entreprise possible</li>
</ul>
<p><strong>Inconvénients :</strong></p>
<p><strong>Coût de mise en place :</strong></p>
<ul>
<li>Produits chers</li>
<li>Compétences rares</li>
</ul>
<p><strong>Complexité :</strong></p>
<ul>
<li>Mise en œuvre et gestion complexes</li>
<li><strong>Alternative :</strong> Sous-traitance service PKI</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-25-contents" aria-controls="callout-25" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Texte original
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-25" class="callout-25-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>PKI: Principaux Avantages et Inconvénients</strong></p>
<p><strong>Avantages</strong></p>
<ul>
<li><p><strong>Sécurité</strong> : La nature intégrée d’une PKI permet de créer un environnement de sécurité sans maillons faibles.</p></li>
<li><p><strong>Tout en un</strong> : Une PKI permet l’intégration et la gestion de tous les paramètres de sécurité propres à un grand nombre de services : authentification forte d’entités, signature des documents permettant la non-répudiation, single sign-on, réseaux privés virtuels (VPNs), communications sécurisées avec des clients/partenaires/fournisseurs (B2C, B2B), etc. La PKI constitue une économie notable par rapport aux solutions “au cas par cas”.</p></li>
<li><p><strong>Inter-opérabilité intra et inter entreprise</strong> : Les principaux produits PKI répondent à des normes de standardisation très répandues (X.509, PKCS, OCSP, etc.). Un grand nombre d’applications et dispositifs matériels sont désormais conformes à ces standards. La compatibilité possible entre différents fournisseurs de PKIs permet également (sous quelques réserves) l’inter-opérabilité inter-entreprise.</p></li>
</ul>
<p><strong>Inconvénients</strong></p>
<ul>
<li><strong>Coût de mise en place</strong> : produits chers, compétences rares</li>
<li><strong>Complexité</strong>…mais :
<ul>
<li>la sous-traitance du “service” PKI est une alternative.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-26-contents" aria-controls="callout-26" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Révision rapide
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-26" class="callout-26-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>PKI :</strong></p>
<p><strong>✅ Avantages :</strong></p>
<ul>
<li>Sécurité intégrée</li>
<li>Tout-en-un : multi-services</li>
<li>Interopérabilité (standards)</li>
</ul>
<p><strong>❌ Inconvénients :</strong></p>
<ul>
<li>Coût élevé</li>
<li>Complexité</li>
<li>Solution : sous-traitance</li>
</ul>
</div>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>